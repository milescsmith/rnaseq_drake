BootStrap: docker
From: bioconductor/bioconductor_docker:RELEASE_3_10

%labels
    Author miles-smith@omrf.org
    Version 0.0.9

%environment
    export DEBIAN_FRONTEND=noninteractive

%files
    /home/milo/workspace/rnaseq_drake/containers/rnaseq-drake-rocker/packages.R /home/rstudio/packages.R

%post
    apt-get -y update
    apt-get install -y \
        curl \
        git-core \
        libbz2-dev \
        libcgal-dev \
        libcurl4-openssl-dev \
        libfreetype6-dev \
        libgit2-dev \
        libglu1-mesa-dev \
        libgsl-dev \
        libhdf5-dev \
        liblapack-dev \
        liblzma-dev \
        libopenblas-dev \
        libpng-dev \
        libssh2-1-dev \
        libssl-dev \
        libx11-dev \
        libxml2-dev \
        make \
        pandoc \
        pandoc-citeproc \
        python-minimal \
        rclone \
        ssh \
        tzdata \
        vim
    cp /usr/share/zoneinfo/America/Chicago /etc/localtime
    apt-get clean
    rm -rf /tmp/downloaded_packages/*
    rm -rf /var/lib/apt/lists/*
    curl https://rclone.org/install.sh | sudo bash
    Rscript -e "install.packages('hdf5r', configure.args='--with-hdf5=/usr/bin/h5cc'); \
        install.packages(c('remotes', 'devtools'), upgrade = TRUE, ask = FALSE); \
        source('/home/rstudio/packages.R')"
    rm -rf /tmp/downloaded_packages/ /tmp/*.rds
    rm /home/rstudio/packages.R
